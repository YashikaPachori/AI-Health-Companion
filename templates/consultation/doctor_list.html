{% extends 'base.html' %}
{% block title %}Consult a Doctor{% endblock %}

{% block content %}
<div class="container" style="margin-top: 3rem;">
    <h1 class="text-center">Consult a Doctor</h1>
    
    {% if request.GET.specialization %}
        <div style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); padding: 1.5rem; border-radius: 10px; margin: 2rem 0; border-left: 4px solid var(--accent-color);">
            <p style="margin: 0; color: var(--primary-color); font-weight: 600;">
                üîç Showing doctors specializing in: <span style="color: var(--accent-color);">{{ request.GET.specialization }}</span>
            </p>
            <a href="{% url 'consultation:doctor_list' %}" style="color: var(--secondary-color); text-decoration: none; font-size: 0.9rem; margin-top: 0.5rem; display: inline-block;">
                ‚Üê View all available doctors
            </a>
        </div>
    {% else %}
        <div style="background: #e3f2fd; padding: 1.5rem; border-radius: 10px; margin: 2rem 0; border-left: 4px solid #2196f3;">
            <p style="margin: 0; color: #1976d2;">
                üìã Showing all available doctors. Use the search or filter options to find specific specialists.
            </p>
        </div>
    {% endif %}
    
    <div class="table-container" style="margin-top: 2rem;">
        <table>
            <thead>
                <tr>
                    <th>Doctor name</th>
                    <th>Specialization</th>
                    <th>Email</th>
                    <th>Ratings</th>
                    <th>View profile</th>
                    <th>Consult</th>
                </tr>
            </thead>
            <tbody>
                {% for doctor in doctors %}
                <tr>
                    <td style="font-weight: 600;">üë®‚Äç‚öïÔ∏è Dr. {{ doctor.user.get_full_name }}</td>
                    <td><span style="color: var(--primary-color); font-weight: 600;">{{ doctor.specialization }}</span></td>
                    <td style="color: var(--light-text);">{{ doctor.user.email }}</td>
                    <td>
                        <span style="color: var(--warning-color); font-weight: 600;">‚≠ê {{ doctor.rating }}/5</span>
                        {% if doctor.total_ratings %}
                            <span style="color: var(--light-text); font-size: 0.85rem;">({{ doctor.total_ratings }})</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'accounts:doctor_profile' doctor.user.username %}" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">üë§ Profile</a>
                    </td>
                    <td>
                        <a href="{% url 'consultation:consult_doctor' doctor.id %}" class="btn btn-secondary" style="padding: 0.5rem 1.5rem; font-size: 0.9rem;">üí¨ Consult</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center" style="padding: 3rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üë®‚Äç‚öïÔ∏è</div>
                        <p style="color: var(--light-text); font-size: 1.1rem;">No doctors available at the moment</p>
                        <p style="color: var(--lighter-text); font-size: 0.9rem; margin-top: 0.5rem;">Please check back later</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}